<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservation | Lumare Luxury Resort</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Cormorant+Garamond:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- Root & Variables (Promotion 페이지와 동일) --- */
        :root {
            --gold: #cbb89e;
            --gold-dark: #bba78d;
            --dark: #1e2a35;
            --text-gray: #666;
            --bg-light: #fdfaf7;
            --white: #ffffff;
            --transition: all 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }

        /* --- Reset & Base --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: "Nanum Gothic", sans-serif; color: var(--dark); background: var(--bg-light); line-height: 1.7; word-break: keep-all; overflow-x: hidden; }
        a { text-decoration: none; color: inherit; display: inline-block; }
        img { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 1.2s ease; }
        ul, li { list-style: none; }

        header {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
  width: 100%;
  transition: all 0.4s ease;
  border-bottom: 1px solid rgba(246, 243, 238, 0.1);
  background-color: transparent;
  font-weight: bold;
}

header .inner {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 80px;
  width: 100%;
  max-width: 1620px;
  margin: 0 auto;
  transition: all 0.4s ease;
}

header #logo img {
  width: 65px;
  transition: all 0.4s ease;
}header #gnb ul {
  display: flex;
  align-items: center;
  gap: 20px;
  list-style: none;
}

header #gnb ul li {
  display: flex;
  align-items: center;
  font-family: "Nanum Gothic", sans-serif;
  font-weight: 500;
}

/* 구분선(|) 설정 */
header #gnb ul li::after {
  content: '|';
  margin-left: 20px;
  color: #F6F1E8;
  font-weight: normal;
  font-size: 12px;
  opacity: 0.5;
}

header #gnb ul li:last-child::after {
  content: none;
}

header #gnb ul li a {
  text-decoration: none;
  color: #F6F1E8;
  font-size: 14px;
  transition: color 0.4s ease;
}

header #gnb ul li a.btn-menu-open {
  display: flex;
  align-items: center;
}

header #gnb ul li a.btn-menu-open img {
  width: 24px;
  cursor: pointer;
}header.on {
  background-color: #fff;
  border-bottom: 1px solid #eee;
}

header.on #logo img, 
header.on .btn-menu-open img {
  filter: invert(1);
}

header.on #gnb ul li::after {
  color: #333;
  opacity: 0.2;
}

header.on #gnb ul li a {
  color: #333;
}/* 최대폭 1620px 이하 */
@media (max-width: 1620px) {
  header .inner {
    padding: 0 4% !important;
  }
}

/* 태블릿/모바일 768px 이하 */
@media (max-width: 768px) {
  header #gnb ul li.none {
    display: none;
  }

  header #gnb ul li::after {
    display: none;
  }
}

/* 초소형 기기 350px 이하 */
@media (max-width: 350px) {
  header .inner {
    height: 60px;
  }

  header #logo img {
    width: 45px;
  }
}

        /* --- Sub Visual --- */
        .sub-visual { 
            height: 55vh; min-height: 450px;
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.4)), url('./img/Concrete\ and\ Wood\ Villa\ Exterior.png') no-repeat center/cover;
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            color: #fff; text-align: center; margin-top: 0;
        }
        .sub-visual h2 { font-family: "Playfair Display", serif; font-size: clamp(40px, 5vw, 64px); font-weight: 400; letter-spacing: 10px; margin-bottom: 15px; }
        .sub-visual p { font-size: 14px; font-weight: 300; letter-spacing: 4px; text-transform: uppercase; opacity: 0.9; }

        /* --- Layout --- */
        .reservation-wrapper { padding: 120px 5%; max-width: 1400px; margin: 0 auto; }
        #resForm { display: grid; grid-template-columns: 1fr 400px; gap: 80px; align-items: flex-start; }

        /* --- Section Styling --- */
        .res-section { margin-bottom: 80px; }
        .section-header { margin-bottom: 40px; }
        .section-header span { color: var(--gold); font-size: 12px; font-weight: 700; letter-spacing: 4px; text-transform: uppercase; display: block; margin-bottom: 15px; }
        .section-header h3 { font-family: 'Cormorant Garamond', serif; font-size: 42px; color: var(--dark); font-weight: 500; }

        /* --- Inputs --- */
        .input-box { display: grid; grid-template-columns: 1.5fr 1fr; gap: 30px; margin-bottom: 60px; }
        .field { display: flex; flex-direction: column; }
        .field label { font-size: 11px; text-transform: uppercase; color: #999; letter-spacing: 2px; margin-bottom: 12px; font-weight: 700; }
        .field input, .field select { 
            padding: 20px 25px; border: 1px solid #e5e5e5; border-radius: 0; background: #fff; font-size: 15px; 
            transition: var(--transition); outline: none; font-family: inherit; color: var(--dark);
        }
        .field input:focus, .field select:focus { border-color: var(--gold); background: var(--white); box-shadow: 0 10px 30px rgba(0,0,0,0.03); }

        /* --- Room Selection --- */
        .room-grid { display: grid; gap: 50px; }
        .room-item { cursor: pointer; display: block; }
        .room-item input { display: none; }
        
        .room-card { 
            display: flex; background: #fff; border: 1px solid transparent; overflow: hidden; 
            transition: var(--transition); position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.03);
        }
        .room-card::after { 
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            border: 1px solid var(--gold); opacity: 0; transition: var(--transition); pointer-events: none;
        }
        
        .room-item:hover .room-card { transform: translateY(-10px); box-shadow: 0 20px 50px rgba(0,0,0,0.08); }
        .room-item input:checked + .room-card { background: #fff; }
        .room-item input:checked + .room-card::after { opacity: 1; border-width: 2px; }

        .room-card .img-w { width: 45%; min-width: 300px; height: 320px; overflow: hidden; position: relative; }
        .room-card .img-w img { width: 100%; height: 100%; object-fit: cover; transition: transform 1.5s ease; }
        .room-item:hover .img-w img { transform: scale(1.08); }

        .room-card .info-w { padding: 40px; flex: 1; display: flex; flex-direction: column; justify-content: center; }
        .room-card .info-w h4 { font-family: 'Cormorant Garamond', serif; font-size: 32px; color: var(--dark); margin-bottom: 15px; font-weight: 500; }
        .room-card .info-w p { font-size: 15px; color: var(--text-gray); margin-bottom: 30px; line-height: 1.8; font-weight: 300; }
        .room-card .info-w .price { font-size: 18px; color: var(--gold-dark); font-weight: 600; letter-spacing: 1px; }

        /* --- Summary Sidebar --- */
        .res-sidebar { position: sticky; top: 130px; }
        .summary-card { 
            background: var(--dark); padding: 50px 40px; color: #fff;
            box-shadow: 0 30px 60px rgba(0,0,0,0.15); position: relative;
        }
        .summary-card h4 { 
            font-family: 'Playfair Display', serif; font-size: 22px; letter-spacing: 3px; 
            text-align: center; margin-bottom: 40px; color: #fff; opacity: 0.9;
            border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 25px;
        }
        .sum-list { margin-bottom: 40px; }
        .sum-list li { display: flex; flex-direction: column; padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .sum-list li span { font-size: 11px; color: var(--gold); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px; font-weight: 700; }
        .sum-list li strong { font-size: 15px; font-weight: 300; color: #efefef; }

        .total-w { text-align: center; padding: 30px 0 0; }
        .total-w span { font-size: 11px; text-transform: uppercase; letter-spacing: 3px; color: #aaa; margin-bottom: 10px; display: block; }
        .total-w strong { font-family: 'Cormorant Garamond', serif; font-size: 42px; color: var(--gold); font-weight: 400; }

        .btn-reserve { 
            width: 100%; height: 70px; background: var(--gold); color: #fff; border: none; margin-top: 40px;
            font-size: 13px; font-weight: 700; letter-spacing: 4px; cursor: pointer; transition: var(--transition);
        }
        .btn-reserve:hover { background: var(--gold-dark); letter-spacing: 6px; }

        /* --- GSAP Initial State --- */
        .gsap-reveal { opacity: 0; visibility: hidden; }

        /* --- Responsive --- */
        @media (max-width: 1024px) {
            #resForm { grid-template-columns: 1fr; gap: 60px; }
            .res-sidebar { position: static; max-width: 100%; margin-top: 50px; }
            .room-card .img-w { width: 40%; }
        }
        @media (max-width: 768px) {
            #main-header .inner { padding: 0 20px; }
            #gnb { display: none; }
            .sub-visual h2 { font-size: 36px; letter-spacing: 8px; }
            
            .input-box { grid-template-columns: 1fr; }
            .room-card { flex-direction: column; }
            .room-card .img-w { width: 100%; height: 240px; }
            .room-card .info-w { padding: 30px; }
        }

        /* Flatpickr Custom */
        .flatpickr-calendar { border-radius: 0 !important; box-shadow: 0 20px 50px rgba(0,0,0,0.1) !important; border: none !important; padding: 15px; }
        .flatpickr-day.selected { background: var(--gold) !important; border-color: var(--gold) !important; border-radius: 0; }
    </style>
</head>
<body>

    <header id="main-header">
        <div class="inner">
            <div id="logo">
                <h1><a href="#"><img src="./img/logo.svg" alt="로고"></a></h1>
            </div>
            <nav id="gnb">
                <ul>
                    <li class="none active"><a href="reservation.html">RESERVATION</a></li>
                    <li class="none active"><a href="promotion.html">PROMOTION</a></li>
                    <li class="none"><a href="#">FACILITIES</a></li>
                    <li>
                        <a href="#" class="btn-menu-open">
                            <img src="./img/menu_22dp_F3EFE7_FILL0_wght400_GRAD0_opsz24.svg" alt="메뉴열기">
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="reservation-page">
        <section class="sub-visual">
            <div class="gsap-hero-text">
                <h2>RESERVATION</h2>
                <p>수평선 너머 달빛이 차오르는 시간, 당신만의 바다가 시작됩니다.</p>
            </div>
        </section>

        <div class="reservation-wrapper">
            <form id="resForm">
                <div class="selection-area">
                    
                    <section class="res-section gsap-section">
                        <div class="section-header">
                            <span>Step 01</span>
                            <h3>Dates & Guests</h3>
                        </div>
                        <div class="input-box">
                            <div class="field">
                                <label>Period of Stay</label>
                                <input type="text" id="dateRange" placeholder="Select check-in and check-out dates" readonly>
                            </div>
                            <div class="field">
                                <label>Occupancy</label>
                                <select id="guests">
                                    <option value="1">1 Person</option>
                                    <option value="2" selected>2 Persons</option>
                                    <option value="3">3 Persons</option>
                                    <option value="4">4 Persons</option>
                                </select>
                            </div>
                        </div>
                    </section>

                    <section class="res-section gsap-section">
                        <div class="section-header">
                            <span>Step 02</span>
                            <h3>Choose Your Sanctuary</h3>
                        </div>
                        <div class="room-grid">
                            <label class="room-item gsap-card">
                                <input type="radio" name="room" value="deluxe" checked>
                                <div class="room-card">
                                    <div class="img-w"><img src="./img/Indoor Hinoki Jacuzzi Spa.png" alt="Deluxe Suite"></div>
                                    <div class="info-w">
                                        <h4>Deluxe Jacuzzi Suite</h4>
                                        <p>Experience true tranquility in our forest-view suite featuring a private outdoor jacuzzi and minimalist design.</p>
                                        <span class="price">KRW 350,000 / night</span>
                                    </div>
                                </div>
                            </label>

                            <label class="room-item gsap-card">
                                <input type="radio" name="room" value="poolvilla">
                                <div class="room-card">
                                    <div class="img-w"><img src="./img/Villa View without Plant.png" alt="Infinity Villa"></div>
                                    <div class="info-w">
                                        <h4>Infinity Pool Villa</h4>
                                        <p>A seamless blend of luxury and nature. Enjoy your own heated pool with a breathtaking ocean view.</p>
                                        <span class="price">KRW 580,000 / night</span>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </section>
                </div>

                <aside class="res-sidebar gsap-sidebar">
                    <div class="summary-card">
                        <h4>STAY SUMMARY</h4>
                        <ul class="sum-list">
                            <li><span>Room</span> <strong id="sum-room">Deluxe Jacuzzi Suite</strong></li>
                            <li><span>Check-in / Out</span> <strong id="sum-date">Select dates</strong></li>
                            <li><span>Guests</span> <strong id="sum-guests">2 Persons</strong></li>
                        </ul>
                        <div class="total-w">
                            <span>Estimated Total</span>
                            <strong id="sum-price">₩ 0</strong>
                        </div>
                        <button type="button" class="btn-reserve" onclick="alert('예약 시스템 연결 준비 중입니다.')">COMPLETE BOOKING</button>
                    </div>
                </aside>
            </form>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(ScrollTrigger);

            // 1. 헤더 텍스트 등장
            gsap.fromTo(".gsap-hero-text", 
                { autoAlpha: 0, y: 50 }, 
                { autoAlpha: 1, y: 0, duration: 1.5, ease: "power3.out", delay: 0.5 }
            );

            // 2. 왼쪽 섹션들 (Step 1, Step 2 텍스트) 등장
            const sections = document.querySelectorAll('.gsap-section');
            sections.forEach(sec => {
                gsap.fromTo(sec, 
                    { autoAlpha: 0, y: 60 },
                    { 
                        scrollTrigger: {
                            trigger: sec,
                            start: "top 85%", 
                        },
                        autoAlpha: 1, 
                        y: 0, 
                        duration: 1.2, 
                        ease: "power3.out" 
                    }
                );
            });

            // 3. 룸 카드 순차 등장
            ScrollTrigger.batch(".gsap-card", {
                start: "top 90%",
                onEnter: (elements) => {
                    gsap.fromTo(elements, 
                        { autoAlpha: 0, y: 80 }, 
                        { 
                            autoAlpha: 1, 
                            y: 0, 
                            stagger: 0.3, 
                            duration: 2, 
                            ease: "power4.out",
                            overwrite: true 
                        }
                    );
                },
                once: true
            });

            // 4. 오른쪽 사이드바 (요약 카드) 별도 등장
            gsap.fromTo(".gsap-sidebar", 
                { autoAlpha: 0, x: 50 }, // 오른쪽에서 살짝 들어오는 느낌
                { 
                    scrollTrigger: {
                        trigger: ".selection-area", // 왼쪽 영역 시작할 때 같이 준비
                        start: "top 80%",
                    },
                    autoAlpha: 1, 
                    x: 0, 
                    duration: 2, 
                    ease: "power3.out",
                    delay: 0.5 // 왼쪽 내용보다 살짝 늦게 
                }
            );


            // --- 예약 로직 (기존 동일) ---
            const roomData = {
                deluxe: { name: 'Deluxe Jacuzzi Suite', price: 350000 },
                poolvilla: { name: 'Infinity Pool Villa', price: 580000 }
            };

            const fp = flatpickr("#dateRange", {
                mode: "range",
                minDate: "today",
                dateFormat: "Y-m-d",
                onClose: (selectedDates, dateStr) => {
                    if (selectedDates.length === 2) {
                        const checkIn = selectedDates[0];
                        const checkOut = selectedDates[1];
                        document.getElementById('sum-date').textContent = `${dateStr.replace(" to ", " — ")}`;
                        
                        const nights = Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));
                        calculateTotal(nights);
                    }
                }
            });

            function calculateTotal(nights = 0) {
                const selectedType = document.querySelector('input[name="room"]:checked').value;
                const total = nights * roomData[selectedType].price;
                
                const priceEl = document.getElementById('sum-price');
                gsap.to(priceEl, {
                    opacity: 0, 
                    duration: 0.1, 
                    onComplete: () => {
                        priceEl.textContent = `₩ ${total.toLocaleString()}`;
                        gsap.to(priceEl, { opacity: 1, duration: 0.3 });
                    }
                });
            }

            document.querySelectorAll('input[name="room"]').forEach(input => {
                input.addEventListener('change', (e) => {
                    document.getElementById('sum-room').textContent = roomData[e.target.value].name;
                    if(fp.selectedDates.length === 2) {
                        const nights = Math.ceil((fp.selectedDates[1] - fp.selectedDates[0]) / (1000 * 60 * 60 * 24));
                        calculateTotal(nights);
                    }
                });
            });

            document.getElementById('guests').addEventListener('change', (e) => {
                document.getElementById('sum-guests').textContent = `${e.target.value} Persons`;
            });
        });
    </script>
</body>
</html>